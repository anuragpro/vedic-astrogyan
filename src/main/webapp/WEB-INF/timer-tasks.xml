

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<bean id="schedulerTask" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
		<property name="targetObject" ref="imageCleanupTask" />
		<property name="targetMethod" value="removeUnwantedPhotos" />
	</bean>

	<bean id="imageCleanupTask" class="com.genophen.crm.timerTask.CleanupImageTask" />
	
	<bean id="imagesTask"
		class="org.springframework.scheduling.timer.ScheduledTimerTask">
		<property name="timerTask" ref="schedulerTask" />
		<property name="delay" value="1000" />
		<property name="period" value="6000000" />
	</bean>

	<bean id="expiryTask" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
		<property name="targetObject" ref="tokenExpiryTask" />
		<property name="targetMethod" value="expireTokens" />
	</bean>

	<bean id="tokenExpiryTask" class="com.genophen.crm.timerTask.ExpireTokensTask" />
	
	<bean id="scheduledTokenExpiryTask"
		class="org.springframework.scheduling.timer.ScheduledTimerTask">
		<property name="timerTask" ref="expiryTask" />
		<property name="delay" value="1000" />
		<property name="period" value="100000" />
	</bean>
	
	<bean id="reminderTask" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
		<property name="targetObject" ref="expiryReminderTask" />
		<property name="targetMethod" value="generateReminders" />
	</bean>

	<bean id="expiryReminderTask" class="com.genophen.crm.timerTask.ExpiryReminderTask" />
	
	<bean id="scheduledExpiryReminderTask"
		class="org.springframework.scheduling.timer.ScheduledTimerTask">
		<property name="timerTask" ref="reminderTask" />
		<property name="delay" value="1000" />
		<property name="period" value="100000" />
	</bean>

	 
	<bean id="notificationsTask"
		class="org.springframework.scheduling.timer.ScheduledTimerTask">
		<property name="timerTask" ref="notifyTask" />
		<property name="delay" value="1000" />
		<property name="period" value="30000" />
	</bean>
	<bean id="notifyTask" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
		<property name="targetObject" ref="sendNotificationTask" />
		<property name="targetMethod" value="sendNotifications" />
	</bean>

	<bean id="sendNotificationTask" class="com.genophen.crm.timerTask.SendNotificationTask" />

	<bean id="decryptionDataTask"
		class="org.springframework.scheduling.timer.ScheduledTimerTask">
		<property name="timerTask" ref="decryptTask" />
		<property name="delay" value="1000" />
		<property name="period" value="30000" />
	</bean>
	<bean id="decryptTask" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
		<property name="targetObject" ref="decryptPersonTask" />
		<property name="targetMethod" value="decrypt" />
	</bean>

	<bean id="decryptPersonTask" class="com.genophen.crm.timerTask.DecryptPersonTask" />
	
		<bean class="org.springframework.scheduling.timer.TimerFactoryBean">
		<property name="scheduledTimerTasks">
			<list>
				<ref local="imagesTask" />
				<ref local="decryptionDataTask" /> 
			 	<!--ref local="scheduledTokenExpiryTask"/-->
			   	<!--ref local="scheduledExpiryReminderTask"/-->   
				<ref local="notificationsTask" />
			</list>
		</property>
	</bean>
</beans>